<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>卦辭 - {{ from_hex }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        table { border-collapse: collapse; width: 100%; margin-top: 1em;}
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .flash { background: #cee5F5; padding: 0.5em; border: 1px solid #aacbe2; margin-bottom: 1em; }
        .self-verse { background-color: #fffbe6; border: 1px solid #ffe58f; padding: 1em; margin-bottom: 1em; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <a href="{{ url_for('yilin_index') }}">&larr; 返回焦氏易林主頁</a>
        <h1>{{ from_hex }}</h1>

        {% if self_verse_entry %}
        <div class="self-verse">
            <h2>{{ self_verse_entry.from }} 之 {{ self_verse_entry.to }}</h2>
            <p>{{ self_verse_entry.verse }}</p>
            <a href="{{ url_for('yilin_edit_verse', from_hex=from_hex, to_hex=self_verse_entry.to) }}">編輯</a>
        </div>
        {% endif %}

        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <div class="flash">{{ messages[0] }}</div>
          {% endif %}
        {% endwith %}

        <h2>其他變卦</h2>
        <table>
            <tr>
                <th>變卦</th>
                <th>卦辭</th>
                <th>操作</th>
            </tr>
            {% for entry in verses %}
            <tr>
                <td>{{ entry.to }}</td>
                <td>{{ entry.verse }}</td>
                <td><a href="{{ url_for('yilin_edit_verse', from_hex=from_hex, to_hex=entry.to) }}">編輯</a></td>
            </tr>
            {% endfor %}
        </table>
    </div>
</body>
</html>